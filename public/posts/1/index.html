<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />


<title>Keep your Slack profile pic updated - Mike Beck</title>
<meta name="author" content="Mike Beck" />
<meta name="description" content="desc" />
<meta name="robots" content="index, follow" />
<meta name="referrer" content="always" />


<meta property="og:title" content="Keep your Slack profile pic updated - Mike Beck" />
<meta property="og:description" content="desc" />
<meta property="og:url" content="/" />

<meta property="og:image" content="/images/avatar.jpg" />
<meta name="twitter:card" content="summary_large_image" />

<meta name="twitter:site" content="@virtualbeck" />


<link rel="icon" href="/images/favicon.ico" />


<link rel="stylesheet" href="/assets/css/split.css" type="text/css" media="screen" />
<meta name="viewport" content="width=device-width,initial-scale=1" />



  <style>
  
    .fs-split .split-image { background-image: url("/images/background.png"); background-position: center center; }
  
  </style>





</head>

<body id="fullsingle" class="page-template-page-fullsingle-split">

  <div class="fs-split">

    
    

      <div class="split-image">

      </div>

    
    

    
    <div class="split-content">
      <div class="split-content-vertically-center">
        
        <div class="split-intro">
  <h1>Keep your Slack profile pic updated</h1>
  
</div>


        
        
          
          <div class="split-bio">
  <p><img src="https://cdn-images-1.medium.com/max/1080/1*nrzte8Cfh2ZckArNdTEB5Q.png" alt="alt text" title="Slack + BASH" /></p>

<p><strong>Let&rsquo;s write a script to take and upload pictures</strong></p>

<p>Bash scripting has always been my goto tool in my line of work. My friend <a href="https://github.com/justmiles">Miles</a> wanted to have his Slack profile picture updated every 5 mins, so he wrote a <a href="https://github.com/justmiles/slack-webcam">program</a> in Go to accomplish this. I am not that savvy with Go, and I wanted to do my own implementation in Bash. Below is the code, only 4 lines really. Let’s look at each line and see what it is going on.</p>

<pre><code class="language-bash"># !/bin/bash
# Upload a new picture to Slack profile to indicate your presence
# put it in your crontab to send every 5 mins
# */5 8–17 * * 1–5 /home/mike/slackProfilePic.sh
# capture image from webcam (use /dev/video0 for default webcam)
streamer -f jpeg -o /home/mike/image.jpeg -c /dev/video1
# introduce blur
convert -blur 0x2 /home/mike/image.jpeg /home/mike/image.jpeg
# send to slack (get your slack token here: https://api.slack.com/custom-integrations/legacy-tokens)
curl https://slack.com/api/users.setPhoto -F “image=@/home/mike/image.jpeg” -F “token=xoxp-123–456–789”
# remove image
rm /home/mike/image.jpeg
</code></pre>

<p><strong>Walkthrough</strong></p>

<ol>
<li><code>#!/bin/bash</code> This is called the shebang, and it just tells the computer where the program <code>bash</code> lives.</li>
<li>Any line that starts with a # means that is it a comment</li>
<li><code># */5 8–17 * * 1–5 slackProfilePic.sh</code> is a comment, but also an example of how the script can be ran by the computer over and over on a cadence by <code>cron</code> (more <a href="https://en.wikipedia.org/wiki/Cron">here</a>). This specific cron entry will run every 5 mins between the hours of 8am and 5pm, Monday through Friday.</li>
<li><code>streamer -f jpeg -o /home/mike/image.jpeg -c /dev/video1</code> The capture line. Streamer is a program that captures audio/video. We are using it to just grab one frame from our webcam, and store it on disk in <em>jpeg</em> format. Read more about streamer <a href="https://linux.die.net/man/1/streamer">here</a>.</li>
<li><code>convert -blur 0x2 /home/mike/image.jpeg /home/mike/image.jpeg</code> The blur line (optional). This line was included to introduce a bit of blur to the newly captured image. I wanted to convey <em>presence</em> without sacrificing privacy. You may choose to change the amount of blur or do something completely different before uploading to Slack. Read more about convert <a href="https://imagemagick.org/script/convert.php">here</a>].</li>
<li><code>curl https://slack.com/api/users.setPhoto -F “image=@/home/mike/image.jpeg” -F “token=xoxp-123–456–789”</code> The upload line. Here, a curl request is used to send the new image to your Slack profile picture, using your Slack token. Much more can be found <a href="https://curl.haxx.se/docs/manpage.html">here</a> about curl, and you can get your own token (and replace this one) <a href="https://api.slack.com/custom-integrations/legacy-tokens">here</a>.</li>
<li><code>rm /home/mike/image.jpeg</code> The cleanup line. This line merely removes the local copy of the image we just uploaded to Slack.</li>
</ol>

<p>That’s it! I hope you found this useful, and are able to convey your online presence (or lack thereof) using the tools available through Linux.</p>
</div>

        

        
        <div class="split-credit">
  <p>&copy;2019 virtualbeck - <a href="https://onepagelove.com/split">Split Template</a> by <a href="https://onepagelove.com">One Page Love</a></p>

  <!--
  To edit this credit you can remove the CC3.0 license for only $5 here: https://onepagelove.com/split
  this really helps contribute towards us developing more templates and means the world to me!
  Cheers, Rob (@robhope)
  -->
</div>

      </div>
    </div>

  </div>

</body>
</html>
